<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Carteirinha - SPR Ja√≠ba e Matias</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print { .no-print { display: none; } }
        .card-bg { background-color: #1a4731; }
    </style>
</head>
<body class="bg-slate-100 p-4">
    <div class="max-w-4xl mx-auto flex flex-col md:flex-row gap-8">
        <div class="w-full md:w-1/3 bg-white p-6 rounded-xl shadow-lg no-print">
            <h2 class="text-xl font-bold mb-4 text-green-800">Dados do Associado</h2>
            <div class="space-y-3 text-sm">
                <div>
                    <label class="block font-medium">Nome Completo</label>
                    <input type="text" id="nome" class="w-full border p-2 rounded">
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block font-medium">CPF</label>
                        <input type="text" id="cpf" placeholder="000.000.000-00" class="w-full border p-2 rounded">
                    </div>
                    <div>
                        <label class="block font-medium">Nascimento</label>
                        <input type="date" id="nascimento" class="w-full border p-2 rounded">
                    </div>
                </div>
                <div>
                    <label class="block font-medium">Telefone</label>
                    <input type="text" id="telefone" placeholder="(00) 00000-0000" class="w-full border p-2 rounded">
                </div>
                <div>
                    <label class="block font-medium">Categoria</label>
                    <select id="categoria" class="w-full border p-2 rounded">
                        <option value="Agricultor">Agricultor</option>
                        <option value="Pecuarista">Pecuarista</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block font-medium">√öltima Filia√ß√£o</label>
                        <input type="date" id="filiacao" class="w-full border p-2 rounded">
                    </div>
                    <div>
                        <label class="block font-medium">Validade</label>
                        <input type="date" id="validade" class="w-full border p-2 rounded">
                    </div>
                </div>
                <div>
                    <label class="block font-medium">Foto do Associado</label>
                    <input type="file" id="fotoInput" accept="image/*" class="w-full border p-2 rounded">
                </div>
                <button onclick="gerarCarteirinha()" class="w-full bg-green-700 text-white py-3 rounded-lg font-bold hover:bg-green-800 transition">Gerar Carteirinha</button>
            </div>
        </div>

        <div id="listaCarteirinhas" class="flex-1 space-y-6">
            </div>
    </div>

    <script>
        function gerarCarteirinha() {
            const dados = {
                nome: document.getElementById('nome').value.toUpperCase(),
                cpf: document.getElementById('cpf').value,
                nascimento: new Date(document.getElementById('nascimento').value).toLocaleDateString('pt-BR'),
                telefone: document.getElementById('telefone').value,
                categoria: document.getElementById('categoria').value,
                filiacao: new Date(document.getElementById('filiacao').value).toLocaleDateString('pt-BR'),
                validade: new Date(document.getElementById('validade').value).toLocaleDateString('pt-BR'),
                id: Date.now()
            };

            const fotoFile = document.getElementById('fotoInput').files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const html = `
                    <div id="card-${dados.id}" class="relative w-[400px] h-[250px] bg-white rounded-xl shadow-2xl border-2 border-green-900 overflow-hidden mx-auto bg-slate-50">
                        <div class="card-bg h-16 flex items-center px-4 relative">
                            <div class="text-white">
                                <h1 class="font-bold text-sm leading-tight">SPR - JA√çBA E MATIAS CARDOSO</h1>
                                <p class="text-[9px] opacity-90">SINDICATO DOS PRODUTORES RURAIS</p>
                            </div>
                            <img src="https://i.ibb.co/Lhy06fN/logo-spr.png" class="absolute right-2 top-1 h-14 bg-white p-1 rounded shadow-sm" alt="Logo SPR">
                        </div>

                        <div class="p-3 flex gap-4">
                            <div class="mt-4">
                                <div class="w-24 h-28 bg-gray-200 border-2 border-green-800 rounded-md overflow-hidden shadow-inner">
                                    <img src="${e.target.result}" class="w-full h-full object-cover">
                                </div>
                            </div>

                            <div class="flex-1 space-y-1 pt-1">
                                <div>
                                    <p class="text-[8px] uppercase text-gray-500 font-bold">Nome do Associado</p>
                                    <p class="text-[13px] font-black text-green-900 leading-tight border-b border-gray-200 pb-1">${dados.nome}</p>
                                </div>
                                <div class="grid grid-cols-2 gap-2 mt-1">
                                    <div>
                                        <p class="text-[8px] text-gray-500 font-bold uppercase">CPF</p>
                                        <p class="text-[10px] font-bold text-gray-800">${dados.cpf}</p>
                                    </div>
                                    <div>
                                        <p class="text-[8px] text-gray-500 font-bold uppercase">Nascimento</p>
                                        <p class="text-[10px] font-bold text-gray-800">${dados.nascimento}</p>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-[8px] text-gray-500 font-bold uppercase">Telefone</p>
                                    <p class="text-[10px] font-bold text-gray-800">${dados.telefone}</p>
                                </div>
                            </div>
                        </div>

                        <div class="absolute bottom-6 left-0 right-0 bg-green-50 border-t border-b border-green-200 py-1 px-4 flex justify-between text-center">
                            <div>
                                <p class="text-[7px] font-bold text-green-800 uppercase">Filia√ß√£o/Renova√ß√£o</p>
                                <p class="text-[9px] font-black text-gray-800">${dados.filiacao}</p>
                            </div>
                            <div>
                                <p class="text-[7px] font-bold text-green-800 uppercase">Categoria</p>
                                <p class="text-[9px] font-black text-gray-800">${dados.categoria}</p>
                            </div>
                            <div>
                                <p class="text-[7px] font-bold text-red-700 uppercase">Validade</p>
                                <p class="text-[9px] font-black text-red-700">${dados.validade}</p>
                            </div>
                        </div>

                        <div class="absolute bottom-0 w-full card-bg py-1 text-center text-white text-[9px] font-bold tracking-widest">
                            CARTEIRA DE SINDICALIZADO
                        </div>

                        <div class="no-print absolute top-18 right-2 flex gap-1 pt-16">
                            <button onclick="window.print()" class="bg-white/80 hover:bg-white p-1 rounded text-green-800 border border-green-800 shadow text-[10px]">üñ®Ô∏è Imprimir</button>
                            <button onclick="document.getElementById('card-${dados.id}').remove()" class="bg-red-500/80 hover:bg-red-500 p-1 rounded text-white shadow text-[10px]">‚ùå</button>
                        </div>
                    </div>
                `;
                document.getElementById('listaCarteirinhas').insertAdjacentHTML('afterbegin', html);
            };

            if(fotoFile) reader.readAsDataURL(fotoFile);
            else alert("Por favor, selecione uma foto!");
        }
    </script>
</body>
</html>
